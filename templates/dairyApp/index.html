{% extends 'base.html' %}
{% load static %}

{% block head %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link href="{% static "fullcalendar/main.css" %}" rel="stylesheet">
    <script src="{% static "js/onloadEvent.js" %}" type="text/javascript"></script>
    <script src="{% static "fullcalendar/main.js" %}" type="text/javascript"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var calendarEl = document.getElementById("calendar");
            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: "dayGridMonth",
            });
            calendar.on('dateClick', function (info) {
                console.log('click on ' + info.dateStr);
                clickOnCalendarEvent(info.dateStr);
            })
            calendar.render();
        });
    </script>
    <script>
        const postDairyContentUrl = "{% url 'post_dairy_content' %}"
        const getDairyContentUrl = "{% url 'get_dairy_content' %}"
        const deleteDairyContentUrl = "{% url 'delete_dairy_content' %}"
        const postDairyPictureUrl = "{% url 'create_dairy_picture' date=today %}"
    </script>
{% endblock head %}

{% block content %}
    <div id="calendar"></div>
    <div id="dairy-content-form" class={{ today }}>
        <div id="save-picture-button">
            <button onclick="postDairyPicture()">写真を投稿</button>
        </div>
        <div id="form-1">
            <h2>1</h2>
            <textarea id="textarea-1" name="content-form"></textarea>
            <button type="submit" onclick="postDairyContent(1)">記録</button>
            <button type="submit" onclick="deleteDairyContent(1)">削除</button>

        </div>
        <div id="form-2">
            <h2>2</h2>
            <textarea id="textarea-2" name=content-form"></textarea>
            <button type="submit" onclick="postDairyContent(2)">記録</button>
            <button type="submit" onclick="deleteDairyContent(2)">削除</button>
        </div>
        <div id="form-3">
            <h2>3</h2>
            <textarea id="textarea-3" name="content-form"></textarea>
            <button type="submit" onclick="postDairyContent(3)">記録</button>
            <button type="submit" onclick="deleteDairyContent(3)">削除</button>
        </div>
    </div>
    <script src="{% static "js/postDairyContent.js" %}" type="text/javascript"></script>
    <script src="{% static "js/splitDate.js" %}" type="text/javascript"></script>
    <script src="{% static "js/getDairyContent.js" %}" type="text/javascript"></script>
    <script src="{% static "js/deleteDairyContent.js" %}" type="text/javascript"></script>
    <script src="{% static "js/clickOnCalendarEvent.js" %}" type="text/javascript"></script>
    <script src="{% static "js/postDairyPicture.js" %}" type="text/javascript"></script>
{% endblock content %}
